<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SOKRP ‚Äî NDA Signing</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#050b18;
  --card:#081320;
  --accent:#6d28d9;
  --muted:#9aa4b2;
  --text:#e6eef8;
  --sig-bg:#0b0e14;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,Segoe UI,Roboto;
  background:
    radial-gradient(800px 400px at 10% 10%, rgba(91, 16, 211, 0.15), transparent),
    linear-gradient(180deg,#040b18,#070f1e);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
}
.wrap{max-width:1200px;margin:40px auto;padding:20px}
.card{
  background:var(--card);
  border-radius:16px;
  padding:26px;
  border:1px solid rgba(12, 11, 11, 0.05);
  box-shadow:0 0 30px rgba(95, 16, 223, 0.15);
  animation:fadeIn 1.1s ease forwards;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}

header{display:flex;align-items:center;gap:18px;margin-bottom:22px}
.logo img{
  width:72px;height:72px;border-radius:12px;
  box-shadow:0 0 20px rgba(109,40,217,0.25);
  object-fit:cover;
}
h1{margin:0;font-size:22px}
p.lead{margin:4px 0 0;color:var(--muted);font-size:14px}

.grid{display:grid;grid-template-columns:1fr 420px;gap:20px}
label{display:block;font-size:13px;color:var(--muted);margin-top:12px}
input,textarea{
  width:100%;padding:10px;border-radius:8px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.07);
  color:var(--text);
  margin-top:6px;
}
textarea{min-height:100px;resize:vertical}

#signature-pad{
  width:100%;height:220px;background:#414242;border-radius:10px;
  border:2px dashed rgba(255,255,255,0.08);margin-top:8px;
  touch-action:none;
}

.btn{
  background:var(--accent);color:#fff;border:0;border-radius:8px;
  padding:10px 14px;cursor:pointer;font-weight:600;
  box-shadow:0 0 10px rgba(109,40,217,0.4);
  transition:all 0.2s;
}
.btn:hover{transform:scale(1.04);box-shadow:0 0 15px rgba(109,40,217,0.6)}
.btn.ghost{
  background:transparent;
  border:1px solid rgba(255,255,255,0.1);
  color:var(--muted);
  box-shadow:none;
}
.controls{display:flex;gap:10px;margin-top:10px;align-items:center;flex-wrap:wrap}
.status{font-size:13px;color:var(--muted)}

.sig-small-wrap{
  display:flex;align-items:center;gap:20px;
  background:var(--sig-bg);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:10px;
  padding:12px 14px;
  margin-top:18px;
}
.sig-small-wrap span.label{font-size:13px;color:var(--muted)}
.sig-small-box{
  flex:0 0 auto;width:280px;height:80px;
  border-radius:6px;background:var(--sig-bg);
  display:flex;align-items:center;justify-content:center;
  border:1px solid rgba(255,255,255,0.06);
}
.sig-small-box img{max-width:100%;max-height:70px;object-fit:contain}

.nda-view{
  background:rgba(255,255,255,0.02);
  padding:14px;border-radius:10px;
  height:600px;overflow:auto;
  border:1px solid rgba(255,255,255,0.05);
  color:#767679;
  line-height:1.5;
}
.nda-view h2{font-size:20px;margin-top:0;color:#494747}
.nda-view p{font-size:13px;margin:8px 0}

@media(max-width:900px){
  .grid{grid-template-columns:1fr}
  .nda-view{height:350px}
}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <header>
      <div class="logo">
        <img src="logo.png" alt="SOKRP Logo">
      </div>
      <div>
        <h1>State of Kentucky Roleplay ‚Äî NDA Signing</h1>
        <p class="lead">Please fill out your details and sign below. Your signed NDA will be disclosed to SOKRP Development Management.</p>
      </div>
    </header>

    <div class="grid">
      <div class="left">
        <label>Roleplay Name</label>
        <input id="name" type="text" placeholder="Your Full Roleplay Name">
        <label>Discord ID</label>
        <input id="discordId" type="text" placeholder="123456789012345678">
        <label>Team / Role</label>
        <input id="role" type="text" placeholder="Software / Graphics / Media / Beta Tester">
        <label>Notes (optional)</label>
        <textarea id="notes" placeholder="Any notes..."></textarea>

        <label>Signature (draw below)</label>
        <canvas id="signature-pad"></canvas>

        <div class="controls">
          <button id="clear" class="btn ghost small">Clear</button>
          <button id="undo" class="btn ghost small">Undo</button>
          <div style="flex:1"></div>
          <button id="submitBtn" class="btn">Submit Signed NDA</button>
          <div id="status" class="status"></div>
        </div>

        <div class="sig-small-wrap">
          <span class="label">Signature Preview:</span>
          <div class="sig-small-box" id="sigSmallBox">
            <span style="color:var(--muted);font-size:13px">No signature yet</span>
          </div>
        </div>
      </div>

      <aside class="right">
        <div class="nda-view">
          <h2>NON-DISCLOSURE AGREEMENT</h2>
          <p><strong>PARTIES</strong><br>
          This Non-Disclosure Agreement is entered into on <span id="ndadate"></span>, by <strong>State of Kentucky Roleplay Development Command</strong> and <strong><span id="previewName">[Enter your name]</span></strong>.</p>

          <p><strong>CONFIDENTIAL INFORMATION</strong><br>
          The Receiving Party agrees not to disclose, copy, clone, or modify any confidential information related to the SOKRP and agrees not to use any such information without obtaining consent. ‚ÄúConfidential information‚Äù refers to any data and/or information related to the Disclosing Party, including discoveries, processes, techniques, programs, or knowledge bases.</p>

          <p><strong>RETURN OF CONFIDENTIAL INFORMATION</strong><br>
          The Receiving Party agrees to return all confidential information to the SOKRP Development Team upon termination of this Agreement.</p>

          <p><strong>OWNERSHIP</strong><br>
          This Agreement is not transferable and may only be transferred by written consent provided by both Parties.</p>

          <p><strong>SIGNATURE AND DATE</strong><br>
          The Parties hereby agree to the terms and conditions set forth in this Agreement and such is demonstrated by their signatures below:</p>

          <p><em>SOKRP Development Team Management</em></p>

          <hr>
          <p><strong>Signed by:</strong> <span id="sigPreviewName">[NAME]</span><br>
          <strong>Discord ID:</strong> <span id="sigPreviewDiscord">[DISCORD ID]</span></p>
        </div>
      </aside>
    </div>
  </div>
</div>

<script>
const WEBHOOK_URL="https://discord.com/api/webhooks/1438592976279437404/uf4h0RutBfteN4l_lRNZTfEY8cfj1kGiaybSY4D2B-dF1ZlFCzkEx_FLiQq1ancCKHjs";
const LOGO_URL="https://cdn.discordapp.com/attachments/1437638010903465984/1437953301130772582/SOKRP_Dev_Logo_2.png";

const canvas=document.getElementById('signature-pad');
const ctx=canvas.getContext('2d');
const nameEl=document.getElementById('name');
const discordEl=document.getElementById('discordId');
const roleEl=document.getElementById('role');
const notesEl=document.getElementById('notes');
const sigSmallBox=document.getElementById('sigSmallBox');
const ndadateEl=document.getElementById('ndadate');
const previewNameEl=document.getElementById('previewName');
const sigPreviewName=document.getElementById('sigPreviewName');
const sigPreviewDiscord=document.getElementById('sigPreviewDiscord');
ndadateEl.textContent=new Date().toLocaleDateString();

function setupCanvas(){
  const rect=canvas.getBoundingClientRect();
  canvas.width=rect.width;
  canvas.height=rect.height;
  ctx.fillStyle='#808080';
  ctx.fillRect(1,0,rect.width,rect.height);
  ctx.lineWidth=2;
  ctx.strokeStyle='#13210';
  ctx.lineCap='round';
}
setupCanvas();
window.addEventListener('resize',setupCanvas);

let drawing=false,paths=[];
function pos(e){
  const r=canvas.getBoundingClientRect();
  return {x:(e.touches?e.touches[0].clientX:e.clientX)-r.left, y:(e.touches?e.touches[0].clientY:e.clientY)-r.top};
}

canvas.addEventListener('pointerdown',e=>{
  drawing=true;
  paths.push([]);
  const p=pos(e);
  paths.at(-1).push(p);
  ctx.beginPath();ctx.moveTo(p.x,p.y);
});
canvas.addEventListener('pointermove',e=>{
  if(!drawing)return;
  const p=pos(e);
  paths.at(-1).push(p);
  ctx.lineTo(p.x,p.y);
  ctx.stroke();
});
canvas.addEventListener('pointerup',()=>{drawing=false;updatePreviewSig();});

document.getElementById('clear').onclick=()=>{
  paths=[];
  setupCanvas();
  sigSmallBox.innerHTML='<span style="color:var(--muted);font-size:13px">No signature yet</span>';
};
document.getElementById('undo').onclick=()=>{
  paths.pop();
  setupCanvas();
  for(const s of paths){
    ctx.beginPath();
    ctx.moveTo(s[0].x,s[0].y);
    for(let i=1;i<s.length;i++)ctx.lineTo(s[i].x,s[i].y);
    ctx.stroke();
  }
  updatePreviewSig();
};

function updatePreviewSig() {
  if (paths.length === 0) return;

  const w = 280, h = 80;
  const tmp = document.createElement('canvas');
  tmp.width = w;
  tmp.height = h;
  const c = tmp.getContext('2d');

  
  c.fillStyle = '#343434';
  c.fillRect(0, 0, w, h);

  
  const allPoints = paths.flat();
  const xs = allPoints.map(p => p.x);
  const ys = allPoints.map(p => p.y);
  const minX = Math.min(...xs);
  const minY = Math.min(...ys);
  const maxX = Math.max(...xs);
  const maxY = Math.max(...ys);
  const sigWidth = maxX - minX;
  const sigHeight = maxY - minY;

  
  const pad = 6;
  const scale = Math.min(
    (w - pad * 2) / sigWidth,
    (h - pad * 2) / sigHeight
  );

  
  const offsetX = (w - sigWidth * scale) /  - minX * scale;
  const offsetY = (h - sigHeight * scale) / 2 - minY * scale;

  c.strokeStyle = '#e6eef8';
  c.lineWidth = 1.8;
  c.lineCap = 'round';

  c.save();
  c.translate(offsetX, offsetY);
  c.scale(scale, scale);

  for (const s of paths) {
    if (!s.length) continue;
    c.beginPath();
    c.moveTo(s[0].x, s[0].y);
    for (let i = 1; i < s.length; i++) c.lineTo(s[i].x, s[i].y);
    c.stroke();
  }

  c.restore();

  const img = new Image();
  img.src = tmp.toDataURL();
  sigSmallBox.innerHTML = '';
  sigSmallBox.appendChild(img);
}


[nameEl,discordEl,roleEl,notesEl].forEach(el=>el.addEventListener('input',()=>{
  previewNameEl.textContent=nameEl.value||'[Enter your name]';
  sigPreviewName.textContent=nameEl.value||'[NAME]';
  sigPreviewDiscord.textContent=discordEl.value||'[DISCORD ID]';
}));

async function makeSigBlob(){
  return await new Promise(r=>canvas.toBlob(b=>r(b),'image/png'));
}

document.getElementById('submitBtn').onclick=async()=>{
  if(!nameEl.value.trim()||!discordEl.value.trim()||paths.length===0){
    alert('Please fill everything and sign.');return;
  }
  const btn=document.getElementById('submitBtn');
  const status=document.getElementById('status');
  btn.disabled=true;status.textContent='Uploading...';
  try{
    const blob=await makeSigBlob();
    const embed={
      title:"üìù NDA Disclosure Recorded",
      color:0x6d28d9,
      thumbnail:{url:LOGO_URL},
      fields:[
        {name:"Name",value:nameEl.value,inline:true},
        {name:"Discord ID",value:discordEl.value,inline:true},
        {name:"Role",value:roleEl.value||'N/A',inline:true},
        {name:"Notes",value:notesEl.value||'N/A',inline:false}
      ],
      footer:{text:"SOKRP Development Command ‚Ä¢ NDA System",icon_url:LOGO_URL},
      timestamp:new Date().toISOString()
    };
    const form=new FormData();
    form.append('payload_json',JSON.stringify({username:"SOKRP NDA System",avatar_url:LOGO_URL,embeds:[embed]}));
    form.append('file',blob,`${nameEl.value}_signature.png`);
    const res=await fetch(WEBHOOK_URL,{method:'POST',body:form});
    if(!res.ok)throw new Error(await res.text());
    status.textContent='‚úÖ Submitted successfully!';
  }catch(e){console.error(e);status.textContent='‚ùå '+e.message;}
  finally{btn.disabled=false;}
};
</script>
</body>
</html>
